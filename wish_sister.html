<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday, Dearest Sister!</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Great Vibes for headings, Poppins for body -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Tone.js for music -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <style>
        /* Custom styles and animations */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #0d0d2b; /* Deep blue-purple dark theme */
            color: #e0e0e0;
            overflow-x: hidden;
        }
        .font-great-vibes {
            font-family: 'Great Vibes', cursive;
        }

        /* Sparkle Effects Container */
        #sparkle-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9998;
        }
        .sparkle {
            position: fixed;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            animation: sparkle-fly 1.8s ease-out forwards;
        }
        @keyframes sparkle-fly {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
            }
        }


        /* Start Screen */
        #start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0d0d2b;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            transition: opacity 1s ease, visibility 1s ease;
        }
        #start-button, #reveal-letter-button {
            padding: 1rem 2.5rem;
            font-size: 1.1rem; /* Adjusted for mobile */
            font-weight: 600;
            color: white;
            background: linear-gradient(45deg, #89CFF0, #9B59B6); /* New color scheme */
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 0 20px #89CFF0, 0 0 30px #9B59B6;
            animation: pulse-button 2.5s infinite;
            transition: transform 0.3s ease;
        }
        #start-button:hover, #reveal-letter-button:hover {
            transform: scale(1.1);
        }
        @keyframes pulse-button {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 0 20px #89CFF0, 0 0 30px #9B59B6; 
            }
            50% { 
                transform: scale(1.08);
                box-shadow: 0 0 35px #a7d8f0, 0 0 50px #b67ec8;
            }
        }
        
        /* Main content visibility */
        #main-content {
            opacity: 0;
            transition: opacity 1.5s ease;
        }
        #main-content.visible {
            opacity: 1;
        }

        /* Glowing Text */
        .text-glow {
            text-shadow: 0 0 8px #f871b6, 0 0 10px #f871b6, 0 0 20px #f871b6;
        }

        /* Scroll-reveal animation */
        .reveal-section {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 1.2s ease-out, transform 1.2s ease-out;
        }
        .reveal-section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Photo Gallery Styling */
        .gallery-image-container {
            overflow: hidden;
            border-radius: 1rem;
            border: 2px solid rgba(137, 207, 240, 0.3);
            box-shadow: 0 0 15px rgba(137, 207, 240, 0.2);
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            cursor: pointer;
        }
        .gallery-image-container:hover {
            transform: scale(1.05) translateY(-10px);
            box-shadow: 0 0 30px rgba(137, 207, 240, 0.5);
        }
        .gallery-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
        }
        .gallery-image-container:hover .gallery-image {
            transform: scale(1.1);
        }

        /* Modal Styling */
        #modal {
            background-color: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            transition: opacity 0.4s ease, visibility 0.4s ease;
        }
        #modal-content {
            transition: transform 0.4s ease;
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f0f;
            top: -20px;
            opacity: 0;
            animation: fall 4s linear forwards;
        }
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="sparkle-container"></div>

    <div id="start-screen">
        <h1 class="font-great-vibes text-6xl sm:text-7xl text-glow mb-8 text-center px-4">A Surprise For You</h1>
        <button id="start-button">Click to Start</button>
    </div>

    <div id="main-content">
        <div id="animation-container" class="fixed inset-0 pointer-events-none z-50"></div>

        <header class="h-screen flex flex-col items-center justify-center text-center p-4 reveal-section">
            <h1 class="font-great-vibes text-7xl sm:text-8xl md:text-9xl text-glow">Happy Birthday</h1>
            <h2 class="font-great-vibes text-5xl sm:text-6xl md:text-7xl text-glow -mt-4 sm:-mt-8 mb-4">Dearest Sister</h2>
            <p class="text-lg sm:text-xl max-w-2xl mx-auto">To the best sister in the world, I made this little surprise just for you!</p>
        </header>

        <main class="container mx-auto px-6 py-20 space-y-24 md:space-y-28">
            <section class="reveal-section text-center">
                <h2 class="font-great-vibes text-6xl md:text-7xl text-glow mb-12">Our Crazy Memories</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-12">
                    <div class="gallery-image-container cursor-pointer modal-trigger" data-src="https://placehold.co/600x800/89CFF0/ffffff?text=Childhood+Photo">
                        <img src="https://placehold.co/600x800/89CFF0/ffffff?text=Childhood+Photo" alt="Memory 1" class="gallery-image">
                    </div>
                    <div class="gallery-image-container cursor-pointer modal-trigger" data-src="https://placehold.co/600x800/9B59B6/ffffff?text=Funny+Moment">
                        <img src="https://placehold.co/600x800/9B59B6/ffffff?text=Funny+Moment" alt="Memory 2" class="gallery-image">
                    </div>
                     <div class="gallery-image-container cursor-pointer modal-trigger" data-src="https://placehold.co/600x800/f871b6/ffffff?text=Recent+Trip">
                        <img src="https://placehold.co/600x800/f871b6/ffffff?text=Recent+Trip" alt="Memory 3" class="gallery-image">
                    </div>
                </div>
            </section>

            <section class="reveal-section text-center">
                <h2 class="font-great-vibes text-6xl md:text-7xl text-glow mb-12">Why You're the Best Sister</h2>
                <div id="reasons-list" class="max-w-xl mx-auto space-y-4">
                    <!-- Reasons will be populated here -->
                </div>
            </section>

            <section class="reveal-section text-center py-20">
                 <h2 class="font-great-vibes text-6xl md:text-7xl text-glow mb-8">And Finally...</h2>
                 <p class="text-lg sm:text-xl mb-12">A special letter, just for you.</p>
                 <button id="reveal-letter-button">Open Your Letter</button>
                 <div id="special-message" class="hidden mt-12 max-w-3xl mx-auto p-6 sm:p-8 border-2 border-pink-400/30 rounded-2xl bg-black/20 backdrop-blur-sm text-left">
                    <h3 class="font-great-vibes text-4xl sm:text-5xl text-glow mb-4">To my amazing sister, [Sister's Name],</h3>
                    <p class="text-base sm:text-lg leading-relaxed">
                        From fighting over the remote to being each other's biggest secret-keeper, we've shared it all. You're not just my sister, but my best friend.
                        <br><br>
                        I'm so proud of the person you've become. I hope your birthday is as fun, bright, and incredible as you are. May all your dreams come true!
                        <br><br>
                        Lots of love,<br>
                        Your loving brother/sister, [Your Name]
                    </p>
                 </div>
            </section>
        </main>
    </div>

    <div id="modal" class="fixed inset-0 z-[9999] flex items-center justify-center p-4 opacity-0 invisible">
        <div id="modal-content" class="bg-gray-900/50 backdrop-blur-xl p-4 rounded-2xl max-w-3xl max-h-[90vh] w-full transform scale-95">
            <img id="modal-img" src="" alt="Enlarged memory" class="w-full h-full object-contain rounded-lg">
        </div>
    </div>

    <!-- Lenis Smooth Scroll Library -->
    <script src="https://unpkg.com/lenis@1.1.2/dist/lenis.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const startButton = document.getElementById('start-button');
            const startScreen = document.getElementById('start-screen');
            const mainContent = document.getElementById('main-content');
            
            startButton.addEventListener('click', () => {
                startScreen.style.opacity = '0';
                startScreen.style.visibility = 'hidden';
                mainContent.classList.add('visible');
                
                // Initialize everything after user interaction
                initApp();
            });

            function initApp() {
                // Lenis Smooth Scroll Initialization
                const lenis = new Lenis();
                function raf(time) {
                    lenis.raf(time);
                    requestAnimationFrame(raf);
                }
                requestAnimationFrame(raf);

                // DIV-based Sparkle Engine
                const sparkleContainer = document.getElementById('sparkle-container');
                const gestureColors = ['#89CFF0', '#F871B6', '#FFFFFF', '#9B59B6']; // New color palette
                let gestureThrottled = false;
                let scrollThrottled = false;

                // For finger/mouse gestures
                function createGestureSparkle(x, y) {
                    if (gestureThrottled) return;
                    gestureThrottled = true;
                    setTimeout(() => { gestureThrottled = false; }, 16); // ~60fps throttle

                    for (let i = 0; i < 3; i++) {
                        const sparkle = document.createElement('div');
                        sparkle.className = 'sparkle';
                        sparkle.style.top = `${y}px`;
                        sparkle.style.left = `${x}px`;
                        const size = Math.random() * 4 + 2;
                        sparkle.style.width = `${size}px`;
                        sparkle.style.height = `${size}px`;
                        const moveX = (Math.random() - 0.5) * 150;
                        const moveY = (Math.random() - 0.5) * 150;
                        sparkle.style.setProperty('--tx', `${moveX}px`);
                        sparkle.style.setProperty('--ty', `${moveY}px`);
                        const color = gestureColors[Math.floor(Math.random() * gestureColors.length)];
                        sparkle.style.backgroundColor = color;
                        sparkle.style.boxShadow = `0 0 8px ${color}, 0 0 12px ${color}`;
                        sparkleContainer.appendChild(sparkle);
                        setTimeout(() => sparkle.remove(), 1800);
                    }
                }

                // For scrolling gestures
                function createScrollSparkle() {
                    if (scrollThrottled) return;
                    scrollThrottled = true;
                    setTimeout(() => { scrollThrottled = false; }, 50);

                    for (let i = 0; i < 7; i++) {
                        const sparkle = document.createElement('div');
                        sparkle.className = 'sparkle';
                        const side = Math.random() > 0.5 ? 0 : window.innerWidth;
                        const startY = Math.random() * window.innerHeight;
                        sparkle.style.top = `${startY}px`;
                        sparkle.style.left = `${side}px`;
                        const size = Math.random() * 5 + 2;
                        sparkle.style.width = `${size}px`;
                        sparkle.style.height = `${size}px`;
                        const moveX = (side === 0 ? 1 : -1) * (Math.random() * window.innerWidth * 0.8);
                        const moveY = (Math.random() - 0.5) * window.innerHeight;
                        sparkle.style.setProperty('--tx', `${moveX}px`);
                        sparkle.style.setProperty('--ty', `${moveY}px`);
                        const color = gestureColors[Math.floor(Math.random() * gestureColors.length)];
                        sparkle.style.backgroundColor = color;
                        sparkle.style.boxShadow = `0 0 8px ${color}, 0 0 12px ${color}`;
                        sparkleContainer.appendChild(sparkle);
                        setTimeout(() => sparkle.remove(), 1800);
                    }
                }
                
                function handleMove(e) {
                    const touch = e.touches ? e.touches[0] : null;
                    const x = touch ? touch.clientX : e.clientX;
                    const y = touch ? touch.clientY : e.clientY;
                    if (x && y) createGestureSparkle(x, y);
                }
                window.addEventListener('mousemove', handleMove);
                window.addEventListener('touchmove', handleMove);
                lenis.on('scroll', createScrollSparkle);

                // NEW Upbeat Music for Sister
                const filter = new Tone.AutoFilter("4n").toDestination().start();
                const synth = new Tone.FMSynth({
                    harmonicity: 3.01,
                    modulationIndex: 14,
                    envelope: { attack: 0.01, decay: 0.2, sustain: 0.1, release: 1 },
                    modulationEnvelope: { attack: 0.01, decay: 0.5, sustain: 0, release: 0.2 }
                }).connect(filter);
                synth.volume.value = -12;
                const melody = [
                    { time: '0:0', note: 'C5', duration: '8n' }, { time: '0:1', note: 'G4', duration: '8n' },
                    { time: '0:2', note: 'A4', duration: '4n' }, { time: '1:0', note: 'G4', duration: '4n' },
                    { time: '1:2', note: 'C5', duration: '4n' }, { time: '2:0', note: 'D5', duration: '2n' },
                    { time: '2:2', note: 'E5', duration: '4n' }, { time: '3:0', note: 'D5', duration: '2n' }
                ];
                const part = new Tone.Part((time, value) => synth.triggerAttackRelease(value.note, value.duration, time), melody);
                part.loop = true;
                part.loopEnd = '4m';
                async function startMusic() {
                    try {
                        await Tone.start();
                        Tone.Transport.start();
                        part.start(0);
                    } catch (e) { console.error("Music failed to start:", e); }
                }
                startMusic();

                // Scroll Animations
                const sections = document.querySelectorAll('.reveal-section');
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) entry.target.classList.add('visible');
                    });
                }, { threshold: 0.15 });
                sections.forEach(section => observer.observe(section));

                // Reasons List
                const reasons = [
                    "Your infectious laugh that can brighten any room.",
                    "How you've always been my biggest supporter.",
                    "All our crazy childhood memories and inside jokes.",
                    "Your amazing strength and how you inspire me."
                ];
                const reasonsList = document.getElementById('reasons-list');
                reasons.forEach((reason, index) => {
                    const item = document.createElement('div');
                    item.className = 'reveal-section bg-black/20 p-4 rounded-lg border border-pink-400/20 text-lg';
                    item.style.transitionDelay = `${index * 150}ms`;
                    item.textContent = reason;
                    reasonsList.appendChild(item);
                    observer.observe(item);
                });

                // Modal
                const modal = document.getElementById('modal');
                const modalContent = document.getElementById('modal-content');
                const modalImg = document.getElementById('modal-img');
                document.querySelectorAll('.modal-trigger').forEach(trigger => {
                    trigger.addEventListener('click', () => {
                        modalImg.src = trigger.dataset.src;
                        modal.classList.remove('invisible', 'opacity-0');
                        modalContent.classList.remove('scale-95');
                    });
                });
                modal.addEventListener('click', () => {
                    modal.classList.add('invisible', 'opacity-0');
                    modalContent.classList.add('scale-95');
                });

                // Letter Reveal & Confetti
                const revealButton = document.getElementById('reveal-letter-button');
                const specialMessage = document.getElementById('special-message');
                revealButton.addEventListener('click', () => {
                    revealButton.style.display = 'none';
                    specialMessage.classList.remove('hidden');
                    createConfetti();
                });

                const createConfetti = () => {
                    const container = document.getElementById('animation-container');
                    const colors = ['#89CFF0', '#F871B6', '#FFFFFF', '#9B59B6'];
                    for (let i = 0; i < 200; i++) {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti';
                        confetti.style.left = Math.random() * 100 + 'vw';
                        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.animationDelay = Math.random() * 0.1 + 's';
                        confetti.style.transform = `scale(${Math.random() * 0.8 + 0.5})`;
                        confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
                        container.appendChild(confetti);
                        setTimeout(() => confetti.remove(), 5000);
                    }
                };
            }
        });
    </script>
</body>
</html>
